@using PixelIt.ViewModel.Account
@model AddAccountViewModel

@{
	ViewData["Title"] = "Add Account";
}

<form enctype="multipart/form-data" asp-action="RegistrationUser" method="post" class="container-fluid">
	<div class="mb-3">
		<label asp-for="CreateUser.Email" class="form-label">Email</label>
		<input asp-for="CreateUser.Email" type="email" class="form-control" />
		<span asp-validation-for="CreateUser.Email" class="text-danger"></span>
	</div>
	<div class="mb-3">
		<label asp-for="CreateUser.Password" class="form-label">Password</label>
		<input asp-for="CreateUser.Password" type="password" class="form-control" />
		<span asp-validation-for="CreateUser.Password" class="text-danger"></span>
		</div>
		<div class="mb-3">
		<label asp-for="CreateUser.ConfirmPassword" class="form-label">Confirm Password</label>
		<input asp-for="CreateUser.ConfirmPassword" type="password" class="form-control" />
		<span asp-validation-for="CreateUser.ConfirmPassword" class="text-danger"></span>
		</div>
		<div class="mb-3">
		<label asp-for="CreateUser.Name" class="form-label">Name</label>
		<input asp-for="CreateUser.Name" type="text" class="form-control" />
		<span asp-validation-for="CreateUser.Name" class="text-danger"></span>
		</div>
		<div class="mb-3">
		<label asp-for="CreateUser.Surname" class="form-label">Surname</label>
		<input asp-for="CreateUser.Surname" type="text" class="form-control" />
		<span asp-validation-for="CreateUser.Surname" class="text-danger"></span>
		</div>
		<div class="mb-3">
			<label asp-for="CreateUser.PhoneNumber" class="form-label">Phone Number</label>
		<input asp-for="CreateUser.PhoneNumber" type="tel" class="form-control" />
		<span asp-validation-for="CreateUser.PhoneNumber" class="text-danger"></span>
		</div>
	<div class="mb-3">
		<label asp-for="CreateUser.Nickname" class="form-label">Username</label>
		<input asp-for="CreateUser.Nickname" type="text" class="form-control" />
		<span asp-validation-for="CreateUser.Nickname" class="text-danger"></span>
	</div>
	<div class="mb-3">
		<label asp-for="CreateUser.ProfilePicture" class="form-label">Profile Image</label>
		<input type="file" asp-for="CreateUser.ProfilePicture" />
		<small class="form-text text-muted">Insert here your Image</small>
		<span asp-validation-for="CreateUser.ProfilePicture" class="text-danger"></span>
	</div>
	<div class="mb-3">
		<label asp-for="CreateUser.DateOfBirth" class="form-label">Date of Birth</label>
		<input asp-for="CreateUser.DateOfBirth" type="date" class="form-control" />
		<span asp-validation-for="CreateUser.DateOfBirth" class="text-danger"></span>
			<div class="mb-3 col-md-4">
				<label asp-for="CreateUser.ImageCollections" class="form-label">Insert here your work</label>
				<input type="file" asp-for="CreateUser.ImageCollections" multiple />
				<small class="form-text text-muted">This field is only for the photographer that want to create post on this App (Max. 6 photos)</small>
			</div>
		<div class="d-flex justify-content-between">
			<button type="submit" class="btn btn-primary">Create Account</button>
			<a asp-action="Index" class="btn btn-secondary">Torna alla Home</a>
	</div>
</form>

@section Script {
	@{
		await Html.RenderPartialAsync("_ValidationScriptPartial");
	}
}

<script>
	$('#CreateUser_ImageCollections').on('input', function() {
		var filePath = $(this).val();
		if (filePath) {
			if ($('#imagePreview').lenght === 0) {
				for (var i = 0; i < this.filePaths.lenght ++i){

					$(this).after('<div class="mt-3 mx-2 "><img id="imagePreview" class="img-fluid roounded mt-2" style="max-height: 150px;" /></div>');
				}
			}
			$('#imagePreview').attr('src', filePath);
		} else {
			$('#imagePreview').remove();
	})

	$('#CreateUser_ImageCollections').on('change', function() {
		var filePath = $(this).val();
		for (var i = 0; i < this.filePaths.lenght ++i) {
			$('#imagePreview').remove();
		}
		if (filePath) {
			if ($('#imagePreview').lenght === 0) {
				for (var i = 0; i < this.filePaths.lenght ++i){
					$(this).after('<div class="mt-3 mx-2 "><img id="imagePreview" class="img-fluid rounded mt-2" style="max-height: 150px;" /></div>');
				}
			}
			$('#imagePreview').attr('src', filePath);
		} else {
			$('#imagePreview').remove();
		}
	});

	$('#CreateUser_ProfilePicture').on('input', function() {
		var ppPath = $(this).val();
		if (ppPath) {
			if ($('#ppPreview').lenght === 0) {
				$(this).after('<div class="mt-3"><img id="ppPreview" class="img-fluid rounded-2 mt-2" style="max-width: 50px; max-height: 50px;"</div>');
			}
			$('#ppPreview').attr('src', ppPath);
		} else {
			$('#ppPreview').remove();
		}
	})
</script>